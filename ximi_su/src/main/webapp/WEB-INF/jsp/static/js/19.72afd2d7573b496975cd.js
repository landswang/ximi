webpackJsonp([19],{1031:function(e,t,o){"use strict";function n(e,t){var o;return o=e.replace(/(^\s+)|(\s+$)/g,""),"g"==t.toLowerCase()&&(o=o.replace(/\s/g,"")),o}Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){var e=this;return{header:[{type:"index",title:"序号",align:"center",width:"80px"},{title:"角色",key:"roleName",align:"center"},{title:"描述",key:"roleComment",align:"center"},{title:"操作",key:"action",align:"center",render:function(t,o){var n=e;return t("div",[t("i-button",{props:{type:"info",size:"small",disabled:1e3==o.row.roleId},style:{marginRight:"5px"},on:{click:function(){e.$Modal.confirm({title:"编辑角色",loading:!0,render:function(e){return e("div",[e("p",{style:{fontSize:"14px",padding:"10px 0",marginTop:"20px",color:"#323d4d"}},"角色名称"),e("Input",{props:{value:o.row.roleName,placeholder:"输入角色名称"},on:{input:function(e){n.roleName=e}}}),e("p",{style:{fontSize:"14px",padding:"10px 0",marginTop:"20px",color:"#323d4d"}},"描述"),e("Input",{props:{value:o.row.roleComment,placeholder:"输入角色描述",type:"textarea"},on:{input:function(e){n.roleComment=e}}})])},onOk:function(){if(n.roleName.length<=0||n.roleComment.length<=0)return n.$Modal.remove(),n.$Message.error({content:"角色名称或描述未编辑！",duration:3}),!1;var e=_.omit(o.row,"_index");e.roleName=n.roleName,e.roleComment=n.roleComment,n.$http.post("/auth/modifyRole",e).then(function(e){n.$Message.success("角色编辑成功！"),n.loadList(),n.$Modal.remove(),n.roleName="",n.roleComment=""}).catch(function(e){n.$Message.error({content:e,duration:3})})},onCancel:function(){n.roleName="",n.roleComment=""}})}}},"编辑角色"),t("i-button",{props:{type:"ghost",size:"small",disabled:1e3==o.row.roleId},style:{marginRight:"5px"},on:{click:function(){e.$router.push({name:"edituser",params:{roleId:o.row.roleId,roleName:o.row.roleName}})}}},"设置默认权限")])}}],list:[],data:[],totalPage:10,pageSize:10,page:1,roleName:"",roleComment:""}},created:function(){this.loadList()},methods:{addRole:function(){var e=this;e.$Modal.confirm({title:"新建角色",loading:!0,render:function(t){return t("div",[t("p",{style:{fontSize:"14px",padding:"10px 0",marginTop:"20px",color:"#323d4d"}},"角色名称"),t("Input",{props:{value:e.roleName,placeholder:"输入角色名称"},on:{input:function(t){e.roleName=n(t,"g")}}}),t("p",{style:{fontSize:"14px",padding:"10px 0",marginTop:"20px",color:"#323d4d"}},"描述"),t("Input",{props:{value:e.roleComment,placeholder:"输入角色描述",type:"textarea"},on:{input:function(t){e.roleComment=n(t,"g")}}})])},onOk:function(){if(e.roleName.length<=0||e.roleComment.length<=0)return e.$Modal.remove(),e.$Message.error({content:"角色名称或描述不能为空！",duration:3}),e.roleName="",e.roleComment="",!1;e.$http.post("/auth/creatRole",{roleName:e.roleName,roleComment:e.roleComment}).then(function(t){"1"==t.data.code?(e.$Message.success("新建角色成功！"),e.loadList(),e.$Modal.remove(),e.roleName="",e.roleComment=""):"0"==t.data.code&&(e.$Message.error({content:t.data.msg,duration:4.5}),e.$Modal.remove(),e.roleName="",e.roleComment="")}).catch(function(t){e.$Message.error({content:t,duration:3})})},onCancel:function(){e.roleName="",e.roleComment=""}})},loadList:function(){var e=this;e.$http.post("/auth/allRoleName",{}).then(function(t){var o=t.data;o.data&&(e.totalPage=_.size(o.data),e.data=o.data,e.list=_.chunk(o.data,e.pageSize))}).catch(function(t){e.$Message.error({content:t,duration:3})})},pageChange:function(e){var t=this;t.page!=e&&(t.page=e)},sizeChange:function(e){var t=this;t.pageSize=e,t.list=_.chunk(t.data,e)}}}},1063:function(e,t,o){t=e.exports=o(470)(!0),t.push([e.i,".tab{padding-top:15px}.ivu-tabs-tab{font-size:16px}.page{padding-top:50px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;padding-bottom:50px}.layout-content .extra-btn{font-size:14px;color:#20abff}","",{version:3,sources:["E:/资方系统/ejie_ecrs/webApp/src/pages/system/editrole.vue"],names:[],mappings:"AACA,KACC,gBAAkB,CAClB,AACD,cACC,cAAgB,CAChB,AACD,MACC,iBAAkB,AAClB,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,qBAAsB,AAClB,kBAAmB,AACf,yBAA0B,AAClC,8BAA+B,AAC/B,6BAA8B,AAC1B,uBAAwB,AACpB,mBAAoB,AAC5B,mBAAqB,CACrB,AACD,2BACC,eAAgB,AAChB,aAAe,CACf",file:"editrole.vue",sourcesContent:["\n.tab {\n\tpadding-top: 15px;\n}\n.ivu-tabs-tab {\n\tfont-size: 16px;\n}\n.page {\n\tpadding-top: 50px;\n\tdisplay: -webkit-box;\n\tdisplay: -ms-flexbox;\n\tdisplay: flex;\n\t-webkit-box-pack: end;\n\t    -ms-flex-pack: end;\n\t        justify-content: flex-end;\n\t-webkit-box-orient: horizontal;\n\t-webkit-box-direction: normal;\n\t    -ms-flex-direction: row;\n\t        flex-direction: row;\n\tpadding-bottom: 50px;\n}\n.layout-content .extra-btn {\n\tfont-size: 14px;\n\tcolor: #20abff;\n}\n"],sourceRoot:""}])},1097:function(e,t,o){var n=o(1063);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);o(471)("28ac8216",n,!0)},1132:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("Tabs",{staticClass:"tab",attrs:{value:"system"}},[o("Tab-pane",{staticClass:"tab-item",attrs:{label:"配置角色",name:"system"}},[o("Table",{attrs:{size:"large",columns:e.header,data:e.list[e.page-1]}}),e._v(" "),o("div",{staticClass:"page"},[o("Page",{attrs:{placement:"top",total:e.totalPage,"show-elevator":"","show-sizer":"","show-total":"","page-size":e.pageSize,"page-size-opts":[10,20,30,40]},on:{"on-change":e.pageChange,"on-page-size-change":e.sizeChange}})],1)],1),e._v(" "),o("i-button",{attrs:{slot:"extra",type:"primary",icon:"person-add"},on:{click:e.addRole},slot:"extra"},[e._v("新建角色")]),e._v(" "),o("i-button",{staticClass:"extra-btn",attrs:{slot:"extra",type:"text",icon:"ios-undo-outline"},on:{click:function(t){e.$router.go(-1)}},slot:"extra"},[e._v("返回")])],1)},staticRenderFns:[]}},503:function(e,t,o){function n(e){o(1097)}var a=o(47)(o(1031),o(1132),n,null,null);e.exports=a.exports}});
//# sourceMappingURL=19.72afd2d7573b496975cd.js.map