webpackJsonp([21],{1029:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,o){/^[a-z0-9_-]{6,20}$/.exec(e)?o():o(new Error("密码应由6至20位字母或数字组成"))};e.default={data:function(){return{formItem:{oldPassword:"",newPassword:"",loading:!1},ruleValidate:{oldPassword:[{required:!0,message:"旧密码不能为空",trigger:"blur"},{required:!0,trigger:"blur",validator:n}],newPassword:[{required:!0,message:"新密码不能为空",trigger:"blur"},{required:!0,trigger:"blur",validator:n}]}}},created:function(){},methods:{submit:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var o=JSON.parse(sessionStorage.getItem("userInfo")),n=setTimeout(function(){e.$Message.loading({content:"请求提交中...",duration:0})},500);e.formItem.loading=!0,e.$http.post("/user/resetpwd",{userName:o.accountName,password:e.formItem.oldPassword,repassword:e.formItem.newPassword}).then(function(t){var o=t.data;clearTimeout(n),e.$Message.destroy(),1==o.code?(e.$Message.success({content:o.msg+",请重新登录！"}),e.loginOut()):(e.formItem.loading=!1,e.$Message.error({content:o.msg,duration:3}))}).catch(function(t){clearTimeout(n),e.$Message.destroy(),e.formItem.loading=!1,e.$Message.error({content:t,duration:3})})}else e.$Message.error("表单验证失败!")})},loginOut:function(){sessionStorage.removeItem("userInfo"),this.$router.replace("/login")}}}},1044:function(t,e,o){e=t.exports=o(470)(!0),e.push([t.i,".tab{padding-top:15px}.ivu-tabs-tab{font-size:16px}.layout-content .extra-btn{font-size:14px;color:#20abff}.from-self{padding-top:50px}.block-item{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}","",{version:3,sources:["E:/资方系统/ejie_ecrs/webApp/src/pages/system/changepsw.vue"],names:[],mappings:"AACA,KACC,gBAAkB,CAClB,AACD,cACC,cAAgB,CAChB,AACD,2BACC,eAAgB,AAChB,aAAe,CACf,AACD,WACC,gBAAkB,CAClB,AACD,YACC,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,8BAA+B,AAC/B,6BAA8B,AAC1B,uBAAwB,AACpB,mBAAoB,AAC5B,yBAA0B,AACtB,sBAAuB,AACnB,8BAA+B,AACvC,yBAA0B,AACtB,sBAAuB,AACnB,kBAAoB,CAC5B",file:"changepsw.vue",sourcesContent:["\n.tab {\n\tpadding-top: 15px;\n}\n.ivu-tabs-tab {\n\tfont-size: 16px;\n}\n.layout-content .extra-btn {\n\tfont-size: 14px;\n\tcolor: #20abff;\n}\n.from-self {\n\tpadding-top: 50px;\n}\n.block-item {\n\tdisplay: -webkit-box;\n\tdisplay: -ms-flexbox;\n\tdisplay: flex;\n\t-webkit-box-orient: horizontal;\n\t-webkit-box-direction: normal;\n\t    -ms-flex-direction: row;\n\t        flex-direction: row;\n\t-webkit-box-pack: justify;\n\t    -ms-flex-pack: justify;\n\t        justify-content: space-between;\n\t-webkit-box-align: center;\n\t    -ms-flex-align: center;\n\t        align-items: center;\n}\n"],sourceRoot:""}])},1078:function(t,e,o){var n=o(1044);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);o(471)("0e4a2776",n,!0)},1113:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("Tabs",{staticClass:"tab",attrs:{value:"psw"}},[o("Tab-pane",{staticClass:"tab-item",attrs:{label:"修改密码",name:"psw"}},[o("Form",{ref:"form",staticClass:"from-self",attrs:{model:t.formItem,"label-width":80,rules:t.ruleValidate}},[o("Form-item",{attrs:{label:"旧密码",prop:"oldPassword"}},[o("Input",{staticStyle:{width:"400px"},attrs:{type:"password",maxlength:20,placeholder:"请输入旧密码"},model:{value:t.formItem.oldPassword,callback:function(e){t.formItem.oldPassword=e},expression:"formItem.oldPassword"}})],1),t._v(" "),o("Form-item",{attrs:{label:"新密码",prop:"newPassword"}},[o("Input",{staticStyle:{width:"400px"},attrs:{type:"password",maxlength:20,placeholder:"请输入新密码（不少于6位）"},model:{value:t.formItem.newPassword,callback:function(e){t.formItem.newPassword=e},expression:"formItem.newPassword"}})],1),t._v(" "),o("Form-item",[o("i-button",{attrs:{type:"primary",size:"large",loading:t.formItem.loading},on:{click:function(e){t.submit("form")}}},[t.formItem.loading?o("span",[t._v("修改中")]):o("span",[t._v("确定")])]),t._v(" "),o("i-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost",size:"large"},on:{click:function(e){t.$router.go(-1)}}},[t._v("取消")])],1)],1)],1),t._v(" "),o("i-button",{staticClass:"extra-btn",attrs:{slot:"extra",type:"text",icon:"ios-undo-outline"},on:{click:function(e){t.$router.go(-1)}},slot:"extra"},[t._v("返回")])],1)},staticRenderFns:[]}},501:function(t,e,o){function n(t){o(1078)}var s=o(47)(o(1029),o(1113),n,null,null);t.exports=s.exports}});
//# sourceMappingURL=21.1224a92912d1bb8ab7e9.js.map