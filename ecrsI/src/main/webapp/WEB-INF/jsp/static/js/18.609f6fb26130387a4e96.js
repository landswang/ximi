webpackJsonp([18],{1032:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){var t=this;return{header:[{type:"index",title:"序号",width:80,align:"center"},{title:"账号",key:"accountName",align:"center"},{title:"使用人",key:"userName",align:"center"},{title:"角色",key:"roleName",align:"center"},{title:"描述",key:"roleComment",align:"center"},{title:"状态",key:"status",align:"center",render:function(t,e){return"0"==e.row.status?t("span",{style:{color:"#19be6b"}},"正常"):"1"==e.row.status?t("span",{style:{color:"#ed3f14"}},"已禁用"):t("span",{},"未知")},filters:[{label:"正常",value:0},{label:"禁用",value:1}],filterMultiple:!1,filterMethod:function(t,e){return e.status==t}},{title:"备注",key:"statusRemark",align:"center"},{title:"操作",key:"action",width:150,align:"center",render:function(e,a){var n=t;return e("div",[e("i-button",{props:{type:"info",size:"small",disabled:1e3==a.row.roleId},style:{marginRight:"5px"},on:{click:function(){n.loadRoleName();n.userItem=_.omit(a.row,["_index","password","apikey"]),n.editModal=!0}}},"编辑"),e("i-button",{props:{type:"0"==a.row.status?"error":"success",size:"small",disabled:1e3==a.row.roleId},style:{marginRight:"5px"},on:{click:function(){"0"==a.row.status&&n.$Modal.confirm({title:"禁用原因",render:function(t){return t("Input",{props:{value:n.statusRemark,autofocus:!0,placeholder:"请输入禁用原因..."},style:{marginTop:"20px"},on:{input:function(t){n.statusRemark=t}}})},loading:!0,onOk:function(){var t=_.omit(a.row,"_index");t.statusRemark=n.statusRemark,t.status="1",n.$http.post("/user/modifyAccount",t).then(function(t){n.$Modal.remove(),n.statusRemark="",n.loadList(),n.$Message.success({content:t.data.msg})}).catch(function(t){n.$Notice.error({title:t})})},onCancel:function(){n.statusRemark=""}}),"1"==a.row.status&&t.$Modal.confirm({title:"启用账号",loading:!0,content:"<p>确定要启用此账号？</p>",onOk:function(){var t=_.omit(a.row,"_index");t.statusRemark="",t.status="0",n.$http.post("/user/modifyAccount",t).then(function(t){n.loadList(),n.$Modal.remove(),n.$Message.success({content:t.data.msg})}).catch(function(t){n.$Notice.error({title:t})})}})}}},"0"==a.row.status?"禁用":"启用")])}}],lists:[],data:[],userItem:{},roleList:[],totalPage:10,pageSize:10,page:1,statusRemark:"",editModal:!1}},created:function(){this.loadList()},methods:{pageChange:function(t){var e=this;e.page!=t&&(e.page=t)},sizeChange:function(t){var e=this;e.pageSize=t,e.lists=_.chunk(e.data,t)},loadList:function(){var t=this;t.$http.post("/user/userList",{}).then(function(e){var a=e.data;a&&(t.totalPage=_.size(a),t.data=a,t.lists=_.chunk(a,t.pageSize))}).catch(function(e){t.$Message.error({content:e,duration:3})})},loadRoleName:function(){var t=this;this.$http.post("/auth/allRoleName",{}).then(function(e){if(1!=e.data.code)return t.$Message.error({content:e.data.msg,duration:3}),!1;t.roleList=e.data.data}).catch(function(e){return t.$Message.error({content:e,duration:3}),t.$Modal.remove(),!1})},selectChange:function(t){var e=this;e.userItem.roleComment=_.result(_.find(e.roleList,{roleId:t}),"roleComment"),e.userItem.roleName=_.result(_.find(e.roleList,{roleId:t}),"roleName")},editUser:function(){var t=this;this.$http.post("/user/modifyAccount",t.userItem).then(function(e){1==e.data.code?(t.editModal=!1,t.loadList(),t.$Message.success(e.data.msg)):(t.editModal=!1,t.$Message.error(e.data.msg))}).catch(function(e){t.$Message.error({content:e})})}}}},1062:function(t,e,a){e=t.exports=a(470)(!0),e.push([t.i,".tab{padding-top:15px}.ivu-tabs-tab{font-size:16px}.page{padding-top:50px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;padding-bottom:50px}.layout-content .extra-btn{color:#20abff;font-size:14px}.modal-input{width:100%;height:30px;line-height:30px;padding:0 10px;border-radius:4px;border:1px solid #dddee1;background-color:#fff}.sub-btn{width:120px;margin-right:10px}.cancel-btn{width:120px;color:#2d8cf0;border:1px solid #2d8cf0}","",{version:3,sources:["E:/资方系统/ejie_ecrs/webApp/src/pages/system/system.vue"],names:[],mappings:"AACA,KACC,gBAAkB,CAClB,AACD,cACC,cAAgB,CAChB,AACD,MACC,iBAAkB,AAClB,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,qBAAsB,AAClB,kBAAmB,AACf,yBAA0B,AAClC,8BAA+B,AAC/B,6BAA8B,AAC1B,uBAAwB,AACpB,mBAAoB,AAC5B,mBAAqB,CACrB,AACD,2BACC,cAAe,AACf,cAAgB,CAChB,AACD,aACC,WAAY,AACZ,YAAa,AACb,iBAAkB,AAClB,eAAgB,AAChB,kBAAmB,AACnB,yBAA0B,AAC1B,qBAAuB,CACvB,AACD,SACC,YAAa,AACb,iBAAmB,CACnB,AACD,YACC,YAAa,AACb,cAAe,AACf,wBAA0B,CAC1B",file:"system.vue",sourcesContent:["\n.tab {\n\tpadding-top: 15px;\n}\n.ivu-tabs-tab {\n\tfont-size: 16px;\n}\n.page {\n\tpadding-top: 50px;\n\tdisplay: -webkit-box;\n\tdisplay: -ms-flexbox;\n\tdisplay: flex;\n\t-webkit-box-pack: end;\n\t    -ms-flex-pack: end;\n\t        justify-content: flex-end;\n\t-webkit-box-orient: horizontal;\n\t-webkit-box-direction: normal;\n\t    -ms-flex-direction: row;\n\t        flex-direction: row;\n\tpadding-bottom: 50px;\n}\n.layout-content .extra-btn {\n\tcolor: #20abff;\n\tfont-size: 14px;\n}\n.modal-input {\n\twidth: 100%;\n\theight: 30px;\n\tline-height: 30px;\n\tpadding: 0 10px;\n\tborder-radius: 4px;\n\tborder: 1px solid #dddee1;\n\tbackground-color: #fff;\n}\n.sub-btn {\n\twidth: 120px;\n\tmargin-right: 10px;\n}\n.cancel-btn {\n\twidth: 120px;\n\tcolor: #2d8cf0;\n\tborder: 1px solid #2d8cf0;\n}\n"],sourceRoot:""}])},1096:function(t,e,a){var n=a(1062);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(471)("4fcc1216",n,!0)},1131:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Tabs",{staticClass:"tab",attrs:{value:"system"}},[a("Tab-pane",{staticClass:"tab-item",attrs:{label:"系统管理",name:"system"}},[a("Table",{attrs:{"highlight-row":"",columns:t.header,data:t.lists[t.page-1],size:"large"}}),t._v(" "),a("div",{staticClass:"page"},[a("Page",{attrs:{placement:"top",total:t.totalPage,"show-elevator":"","show-sizer":"","show-total":"","page-size":t.pageSize,"page-size-opts":[10,20,30,40]},on:{"on-change":t.pageChange,"on-page-size-change":t.sizeChange}})],1),t._v(" "),a("Modal",{attrs:{width:"500",loading:!0},model:{value:t.editModal,callback:function(e){t.editModal=e},expression:"editModal"}},[a("p",{staticStyle:{color:"#323d4d","font-size":"14px","text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑账号")])]),t._v(" "),a("div",{staticClass:"center-mod"},[t.editModal?a("Form",{ref:"form",staticClass:"from-self",attrs:{model:t.userItem,"label-width":60}},[a("Form-item",{attrs:{label:"使用人"}},[a("Input",{attrs:{placeholder:"填写使用人名字"},model:{value:t.userItem.userName,callback:function(e){t.userItem.userName=e},expression:"userItem.userName"}})],1),t._v(" "),a("Form-item",{attrs:{label:"角色"}},[a("Select",{attrs:{placeholder:"请选择角色"},on:{"on-change":t.selectChange},model:{value:t.userItem.roleId,callback:function(e){t.userItem.roleId=e},expression:"userItem.roleId"}},t._l(t.roleList,function(e){return a("Option",{key:e.roleId,attrs:{disabled:1e3==e.roleId,value:e.roleId}},[t._v(t._s(e.roleName)+"\n\t\t\t\t\t\t\t")])}))],1),t._v(" "),a("Form-item",{attrs:{label:"描述"}},[a("Input",{attrs:{disabled:"",placeholder:"角色职责描述"},model:{value:t.userItem.roleComment,callback:function(e){t.userItem.roleComment=e},expression:"userItem.roleComment"}})],1)],1):t._e()],1),t._v(" "),a("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("i-button",{staticClass:"sub-btn",attrs:{type:"primary",size:"large"},on:{click:t.editUser}},[t._v("确定")]),t._v(" "),a("i-button",{staticClass:"cancel-btn",attrs:{type:"ghost",size:"large"},on:{click:function(e){t.editModal=!1}}},[t._v("取消")])],1)])],1),t._v(" "),a("i-button",{staticClass:"extra-btn",attrs:{slot:"extra",type:"text"},on:{click:function(e){t.$router.push("adduser")}},slot:"extra"},[t._v("\n\t\t新建账号\n\t")]),t._v(" "),a("i-button",{staticClass:"extra-btn",attrs:{slot:"extra",type:"text"},on:{click:function(e){t.$router.push("editrole")}},slot:"extra"},[t._v("\n\t\t配置角色\n\t")])],1)},staticRenderFns:[]}},504:function(t,e,a){function n(t){a(1096)}var o=a(47)(a(1032),a(1131),n,null,null);t.exports=o.exports}});
//# sourceMappingURL=18.609f6fb26130387a4e96.js.map